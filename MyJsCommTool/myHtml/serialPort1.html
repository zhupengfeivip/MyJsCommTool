<body>
    <div>串口测试</div>
</body>
<script type="text/javascript">
    (async function () {
        await CefSharp.BindObjectAsync("serialPortHelper");

        await serialPortHelper.init();


        //setTimeout("changeState()", 1000);
    })();
  

    function changeState() {
        (async function () {
            await CefSharp.BindObjectAsync("serialPortHelper");

            let recvString = await serialPortHelper.recvData();
            console.log('-' + recvString+ '-');
            if (recvString.trim() == '11') {
                console.log('ok');
                await serialPortHelper.send_data('22');
            }

            setTimeout("changeState()", 1000);
        })();       
    }  
</script>